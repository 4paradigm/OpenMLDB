# 简介

## 什么是 OpenMLDB？

OpenMLDB 是一个开源机器学习数据库，能为企业提供一个降低人工智能落地成本数倍的毫秒级实时特征平台，让数据科学家开发的特征脚本直接上线生产环境，实现开发即上线，并且提供线上毫秒级低延迟、高吞吐、高可用等生产级特性。

**OpenMLDB 的抽象架构**

![workflow_cn](images/workflow_cn.png)

上图展示了 OpenMLDB 的抽象架构，包含了四个重要的设计组件：

- 统一的 **SQL** 编程语言
- 具备毫秒级延迟的高性能**实时 SQL 引擎**
- 基于 [OpenMLDB Spark 发行版](../tutorial/openmldbspark_distribution.md)的**批处理 SQL 引擎**
- 串联实时和批处理 SQL 引擎，保证线上线下一致性的**一致性执行计划生成器**

关于 OpenMLDB 的设计核心理念和详细架构，请参考 OpenMLDB 开发团队博客[实时特征计算平台架构方法论和实践](https://go005qabor.feishu.cn/docs/doccnMxkNQBh49KipaVmYr0xAjf)。

## 为什么要用 OpenMLDB？

在人工智能工程化落地过程中，企业的数据和工程化团队 95% 的时间精力会耗费在数据处理、数据校验等相关工作上。
为了解决该痛点，头部企业会花费上千小时自研数据与特征平台，来解决诸如线上线下一致性、数据穿越、特征回填、高并发低延迟等工程挑战；其他中小企业则需要购买价格昂贵的 SaaS 服务。

OpenMLDB 致力于解决 AI 工程化落地的数据治理难题，并且已经在上百个企业级人工智能场景中得到落地。OpenMLDB 优先开源了特征数据治理能力、依托 SQL 的开发能力等，旨在为企业级机器学习应用提供线上线下计算一致、高性能低门槛的生产级特征平台。

**生产级特征平台**

在没有 OpenMLDB 的传统方式下，实时特征计算上线一般包含如下三个步骤：

1. 数据科学家离线使用 SparkSQL 或者 Python，开发特征脚本；
2. 其开发的离线脚本一般无法在生产环境直接上线（不能满足毫秒级低延迟、高并发、高可用等生产级要求），因此需要工程化团队将离线特征脚本重新优化（如基于 C++ 重构）；
3. 需要对数据科学家开发的离线特征脚本、工程化团队开发的线上服务，进行计算逻辑的一致性校验。

该过程需要经历**三个步骤，涉及两组开发人员、两套工具栈，具有高昂的落地成本**。按照我们经验估算，一个较大的场景完成这三个步骤需要半年左右的人天成本。

OpenMLDB 的目标是为了达到开发即上线，使得**数据科学家开发的特征脚本能够在生产环境直接上线**。其具备离线和在线的两套处理引擎，在线引擎针对特征工程深度优化，可以满足线上生产级需求，并且通过一致性执行计划生成器自动保证线上线下一致性。基于 OpenMLDB，落地一个机器学习应用在特征环节包含以下两个步骤：

1. 数据科学家使用 SQL 开发离线特征脚本；
2. 仅使用一条部署命令，即将特征脚本部署到线上引擎，并且保证线上线下一致性，以及线上服务的生产级质量（毫秒级低延迟、高并发、高可用）；

因此，OpenMLDB 的最大价值是显著降低人工智能的工程化落地成本。以下表格总结了对于一个较大的业务场景下，OpenMLDB 可以数倍的节省机器学习的工程化成本。

|                        | ** 参与角色 **          | ** 传统方式成本 ** | ** 基于 OpenMLDB 成本 ** |
| ---------------------- | --------------------- | ---------------- | -------------------- |
| ** 离线特征脚本开发 **   | 数据科学家            | 1 人月            | 1 人月                |
| ** 在线特征服务开发 **   | 工程化团队            | 2 人月            | 0                    |
| ** 线上线下一致性校验 ** | 数据科学家 工程化团队 | 3 人月            | 0                    |
| ** 总计 **               | **-**                 | **6 人月 **        | **1 人月 **            |

## 四大核心特性

- **线上线下一致性：** 离线和实时特征计算引擎使用统一的执行计划生成器，线上线下计算一致性得到了天然的保证。
- **毫秒级超低延迟的实时 SQL 引擎**：线上实时 SQL 引擎基于完全自研的高性能时序数据库，对于实时特征计算可以达到毫秒级别的延迟，性能远超流行商业内存数据库（可参考 VLDB 2021 上的[论文](http://vldb.org/pvldb/vol14/p799-chen.pdf)），充分满足高并发、低延迟的实时计算性能需求。
- **基于 SQL 定义特征：** 基于 SQL 进行特征定义和管理，并且针对特征计算，对标准 SQL 进行了增强，引入了诸如 `LAST JOIN` 和 `WINDOW UNION` 等定制化语法和功能扩充。
- **生产级特性：** 为大规模企业应用而设计，整合诸多生产级特性，包括分布式存储和计算、灾备恢复、高可用、可无缝扩缩容、可平滑升级、可监控、异构内存架构支持等。

## 常见问题 (FAQ)

 **主要使用场景是什么？**

   目前主要面向人工智能应用，提供高效的线上线下一致性的特征平台，特别针对实时特征需求做了深度优化，达到毫秒级的计算延迟。此外，OpenMLDB 本身也包含了一个高效且功能完备的时序数据库，使用于金融、IoT、数据标注等领域。

 **OpenMLDB 是如何发展起来的？**
   
   OpenMLDB 起源于领先的人工智能平台提供商[第四范式](https://www.4paradigm.com/)的商业软件。其研发团队在 2021 年将商业产品中作为特征工程的核心组件进行了抽象、增强、以及社区友好化，将它们形成了一个系统的开源产品，以帮助更多的企业低成本实现人工智能转型。在开源之前，OpenMLDB 已经作为第四范式的商业化组件之一在上百个场景中得到了部署和上线。
   
 **OpenMLDB 是否是一个 feature store？**
   
   OpenMLDB 认为是目前普遍定义的 feature store 类产品的一个超集。除了可以同时在线下和线上供给正确的特征以外，其主要优势在于提供毫秒级的实时特征。我们看到，今天在市场上大部分的 feature store 是将离线异步计算好的特征同步到线上，但是并不具备毫秒级的实时特征计算能力。而保证线上线下一致性的高性能实时特征计算，正是 OpenMLDB 所擅长的场景。
   
 **OpenMLDB 为什么选择 SQL 作为开发语言？**
   
   SQL 具备表达语法简洁且功能强大的特点，选用 SQL 作为开发语言一方面降低开发门槛，另一方面更易于跨部门之间的协作和共享。此外，基于 OpenMLDB 的实践经验表明，经过优化过的 SQL 在特征计算的表达上功能完备，已经经历了长时间的实践考验。


## 学术论文

* Cheng Chen, Jun Yang, Mian Lu, Taize Wang, Zhao Zheng, Yuqiang Chen, Wenyuan Dai, Bingsheng He, Weng-Fai Wong, Guoan Wu, Yuping Zhao, and Andy Rudoff. *[Optimizing in-memory database engine for AI-powered on-line decision augmentation using persistent memory](http://vldb.org/pvldb/vol14/p799-chen.pdf)*. International Conference on Very Large Data Bases (VLDB) 2021.
* Siqi Wang, Jiashu Li, Mian Lu, Zhao Zheng, Yuqiang Chen, and Bingsheng He. *[A System for Time Series Feature Extraction in Federated Learning](https://github.com/4paradigm/tsfe/blob/main/paper/3511808.3557176.pdf)*. ACM International Conference on Information & Knowledge Management (CIKM) 2022.
